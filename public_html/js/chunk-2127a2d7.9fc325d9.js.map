{"version":3,"sources":["webpack:///./src/plugins/helper/lib/axiosErrorWatch.ts","webpack:///./src/views/Auth/ChangePassword.vue?1cf9","webpack:///./src/views/Auth/ChangePassword.vue?00dd","webpack:///./src/views/Auth/ChangePassword.vue?aa4a","webpack:///./src/views/Auth/ChangePassword.vue","webpack:///./src/plugins/helper/lib/PasswordReset.ts"],"names":["vue","e","this","component","errorResponse","response","status","statusText","errorData","data","deepCollapse","obj","Object","values","list","title","unauthorized","$router","push","name","notFound","unprocessableEntity","tooManyRequests","netWorkError","close","run","$store","dispatch","axiosErrorDialog","axiosErrorWatch","render","_vm","_h","$createElement","_c","_self","attrs","loading","scopedSlots","_u","key","fn","ref","handleSubmit","_v","_s","errorMessage","errors","valid","model","value","callback","$$v","password","expression","password_confirmation","on","$event","submitFrom","staticRenderFns","message","userName","token","userTokenIsValid","query","hasOwnProperty","error","email","PasswordReset","generatePassword","res","join","call","changePassword","components","loginRegisterLayout","VeeP","VeeOb","VBtn","VCardActions","VCard","VCardText","VIcon","VSpacer","VTextField","sendPasswordResetLink","user","axios","post","console","log","matchToken"],"mappings":"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","file":"js/chunk-2127a2d7.9fc325d9.js","sourcesContent":["\r\nimport {axiosForAuth} from './axiosForAuth';\r\n\r\n// tslint:disable\r\n\r\n\r\n\r\n\r\ninterface RenderObj {\r\n    title:string;\r\n    list:string[];\r\n    close:Function;\r\n  }\r\nexport class axiosErrorWatch {\r\n\r\n    private component!:Vue;\r\n    private errorResponse!:any;\r\n    private status!:number;\r\n    private statusText!:string\r\n    private errorData!:IData;\r\n    constructor(vue:Vue,e:any){\r\n        \r\n      \r\n        this.component = vue;\r\n        if(e){\r\n            this.errorResponse = e.response;\r\n            this.status = e.status;\r\n            this.statusText = e.statusText;\r\n            this.errorData = e.data;\r\n        }\r\n       \r\n\r\n\r\n    }\r\n\r\n\r\n    private deepCollapse(){\r\n        let obj = {\"message\":\"The given data was invalid.\",\"errors\":{\"paginate\":[\"can't use offset if paginate are exist\"],\"offset\":[\"offset and paginate both not allow offset or paginate only one\"]}};\r\n        Object.values(obj)\r\n    }\r\n\r\n    private list(){\r\n        if(this.errorData){\r\n            return  ['network error']\r\n           //return generateIndexArray(this.errorData)\r\n        }else {\r\n          return  ['network error']\r\n        }\r\n    }\r\n    private title(){\r\n        return this.title;\r\n    }\r\n\r\n    unauthorized(){\r\n        return async function(this:any){\r\n           \r\n          \r\n        \r\n           this.$router.push({name:'logout'});\r\n        }\r\n    }\r\n    notFound(){ //404\r\n        this.errorData = ['url not found']\r\n        return this.unauthorized()\r\n\r\n    }\r\n    unprocessableEntity(){\r\n        return function(this:any){}\r\n    }\r\n    tooManyRequests(){\r\n         return function(this:any){}\r\n\r\n    }\r\n\r\n    netWorkError(){\r\n        this.errorData = ['server url not found']\r\n        return this.unauthorized()\r\n    }\r\n\r\n\r\n    public close(){\r\n\r\n             if(this.status ===401){\r\n            return this.unauthorized()\r\n\r\n        }else if(this.status ===404){\r\n            return this.notFound()\r\n    \r\n        }else if(this.status ===422){\r\n            return this.unprocessableEntity()\r\n        }\r\n        else if(this.status ===429){\r\n            return this.tooManyRequests()\r\n        }else if(this.status ===499){\r\n        return this.netWorkError()\r\n    }\r\n        else {\r\n            return ()=>{}\r\n        }\r\n    }\r\n\r\n\r\n    public run():RenderObj|any {\r\n     \r\n        \r\n        if(this.errorData){\r\n            let data =  {\r\n                close:this.close(),\r\n                list:this.list(),\r\n                title:this.statusText,\r\n                }\r\n    \r\n            this.component.$store.dispatch('errorData',data);\r\n            return data;\r\n        }else {\r\n            return {}\r\n        }\r\n\r\n    }\r\n\r\n}\r\n\r\nexport function axiosErrorDialog(this:Vue,e:any){\r\n    \r\n    (new axiosErrorWatch(this,e.response)).run()\r\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('loginRegisterLayout',{attrs:{\"title\":\"create new password\",\"loading\":_vm.loading}},[_c('VeeOb',{scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar handleSubmit = ref.handleSubmit;\nreturn [_c('v-card-text',[_vm._v(\"\\n             \"+_vm._s(_vm.errorMessage)+\"\\n            \"),_c('div',[_c('VeeP',{attrs:{\"name\":\"password\",\"rules\":\"required|confirmed:password_confirm\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar valid = ref.valid;\nreturn [_c('v-text-field',{attrs:{\"error-messages\":errors,\"valid\":valid,\"label\":\"password\",\"prepend-inner-icon\":\"mdi-lock-question\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}})]}}],null,true)}),_c('VeeP',{attrs:{\"name\":\"confirmPassword\",\"vid\":\"password_confirm\"},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\nvar errors = ref.errors;\nvar valid = ref.valid;\nreturn [_c('v-text-field',{attrs:{\"error-messages\":errors,\"valid\":valid,\"label\":\"retype Password\",\"prepend-inner-icon\":\"mdi-lock-question\",\"type\":\"password\"},model:{value:(_vm.password_confirmation),callback:function ($$v) {_vm.password_confirmation=$$v},expression:\"password_confirmation\"}})]}}],null,true)})],1)]),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"primary\"},on:{\"click\":function($event){return handleSubmit(_vm.submitFrom)}}},[_c('v-icon',{attrs:{\"left\":\"\",\"dark\":\"\"}},[_vm._v(\"mdi-target\")]),_vm._v(\"\\n            change\\n            \\n              \")],1)],1)]}}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n// tslint:disable\r\nimport {Vue,Component} from 'vue-property-decorator'\r\nimport {axiosForAuth} from \"@/plugins/helper/lib/axiosForAuth\"\r\nimport {PasswordReset } from \"@/plugins/helper/lib/PasswordReset\";\r\n\r\nimport loginRegisterLayout from '@/components/Layout/loginRegisterLayout.vue'\r\nimport {axiosErrorDialog} from '@/plugins/helper/lib/axiosErrorWatch'\r\nimport {\r\n  \r\n  ValidationObserver as VeeOb,\r\n  ValidationProvider as VeeP,\r\n  extend \r\n} from \"vee-validate\";\r\nimport { required, email,max,confirmed} from 'vee-validate/dist/rules';\r\n\r\nextend('required', {\r\n  ...required,\r\n  message: 'This field is required'\r\n});\r\nextend('email', {\r\n  ...email,\r\n  message: 'This is not valid email'\r\n});\r\n\r\nextend('max', {\r\n  ...max,\r\n  message: 'maximum value are 10'\r\n});\r\nextend('confirmed', {\r\n  ...confirmed,\r\n  message: 'both password are not same'\r\n});\r\n\r\n\r\n@Component({components:{loginRegisterLayout,VeeP,VeeOb }})\r\nexport default class changePassword extends Vue{\r\n       $refs!: {\r\n    observer: InstanceType<typeof VeeOb>;\r\n  };\r\n  public loading:boolean = false;\r\n  public userName:string = '';\r\n  public password:string = '';\r\n  public password_confirmation = \"\";\r\n  public token:string = ''\r\n  public errorMessage:string = \"\";\r\n\r\n  public userTokenIsValid(){\r\n     let {query} = this.$route as any;\r\n     \r\n      try {\r\n          if(!query)  throw 'route query missing';\r\n          if(!query.hasOwnProperty('userName')) `route query userName  missing`;\r\n          if(!query.hasOwnProperty('token')) `route query token  missing`;\r\n          this.userName = query.userName;\r\n          this.token = query.token;\r\n          return true;\r\n      } catch (error) {\r\n          this.errorMessage = error;\r\n          return false;\r\n      }\r\n  }\r\n\r\n async submitFrom(){\r\n     if(this.userTokenIsValid()){\r\n            try {\r\n     let obj = {\r\n         token:this.token,\r\n       email:this.userName,\r\n       password:this.password,\r\n\r\n       password_confirmation:this.password_confirmation\r\n     }\r\n       this.loading = false\r\n     let res = await PasswordReset.generatePassword(obj);\r\n        this.loading = false\r\nthis.$router.push({name:'login'})\r\n   } catch (error) {\r\nif(error.response){\r\n       let res = error.response\r\n       if(res.status ===422){\r\n       this.errorMessage =  Object.values(res.data.errors).join('->');\r\n       }\r\n     }\r\n\r\n     axiosErrorDialog.call(this,error);\r\n     return error;\r\n   }\r\n     }\r\n  } \r\n\r\n\r\n}\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangePassword.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/ts-loader/index.js??ref--12-2!../../../node_modules/vuetify-loader/lib/loader.js??ref--18-0!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ChangePassword.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ChangePassword.vue?vue&type=template&id=6394a42d&\"\nimport script from \"./ChangePassword.vue?vue&type=script&lang=ts&\"\nexport * from \"./ChangePassword.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCardActions,VCardText,VIcon,VSpacer,VTextField})\n","import {axiosForAuth} from './axiosForAuth';\r\nexport  class PasswordReset extends  axiosForAuth {\r\n\r\n   public static async sendPasswordResetLink(user: string) {\r\n\r\n        const res = await this.axios.post(`/reset-password-send`, { email: user});\r\n        // tslint:disable-next-line:no-console\r\n        console.log(res.data);\r\n        return res;\r\n    }\r\n\r\n    public static async matchToken(email: string, token: string) {\r\n\r\n        const res = await this.axios.post(`/match-reset-token`, {email, token});\r\n        // tslint:disable-next-line:no-console\r\n        console.log(res);\r\n        return res;\r\n    }\r\n\r\n    public static async generatePassword(obj: any) {\r\n\r\n        const res = await this.axios.post(`/generate-password`, obj);\r\n        // tslint:disable-next-line:no-console\r\n        console.log(res);\r\n        return res;\r\n    }\r\n}\r\n"],"sourceRoot":""}